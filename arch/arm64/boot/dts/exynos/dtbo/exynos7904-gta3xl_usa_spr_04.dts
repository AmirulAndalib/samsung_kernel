/*
 * SAMSUNG EXYNOS7904 board device tree source

 *
 * Copyright (c) 2018 Samsung Electronics Co., Ltd.
 *		http://www.samsung.com
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 as
 * published by the Free Software Foundation.
*/

/dts-v1/;
/plugin/;

#include "exynos7904-gta3xl_common.dtsi"
#include "exynos7904-gta3xl_usa_spr_gpio_04.dtsi"
#include "ccic-s2mm005_gta3xllte_00.dtsi"
#include "modem-s327ap-sipc-highmem.dtsi"

/ {
	compatible = "samsung,GTA3XL USA SPR 03", "samsung,EXYNOS7904";

	dtbo-hw_rev = <4>;
    dtbo-hw_rev_end = <255>;


	fragment@model {
		target-path = "/";
		__overlay__ {
			#address-cells = <2>;
			#size-cells = <1>;

			model = "Samsung GTA3XL USA SPR 03 board based on EXYNOS7904";

			fm@14840000 {
				status = "okay";
				num-trfon-freq = <56>;
				val-trfon-freq = <87500 87600 88300 88400 89000 89100 89800 89900
					90600 90700 91300 91400 92100 92200 92900 93000 93600 93700
					94400 94500 95200 95300 96700 96800 97500 97600 98300 98400 99000 99800 99900 99100
					100000 100600 100700 101300 101400 101500 101600 102100 102200 102900 103000 103600
					103700 104000 104400 104500 105200 105300 105900 106000 106700 106800 107500 107600 >;
				spur-trfon-freq = <1536>;
			};
			
			i2c@20 {
				compatible = "i2c-gpio";
				gpios = <&gpp7 0 0
						&gpp7 1 0>;
				i2c-gpio,delay-us = <2>;
				pinctrl-names = "default";
				pinctrl-0 = <&grip_i2c>;
				#address-cells = <1>;
				#size-cells = <0>;
				status = "okay";

				sx9360_wifi-i2c@28 {
					compatible = "sx9360_wifi";
					pinctrl-names = "default";
					pinctrl-0 = <&grip_wifi_int>;
					reg = <0x28>;
					interrupt-parent = <&gpa0>;
					interrupts = <5 0 0>;
					sx9360_wifi,nirq-gpio = <&gpa0 5 0>; 

					sx9360_wifi,reggnrlctrl2 = <0x28>;		/* scanperiod: 81ms */
					sx9360_wifi,regafeparam1phm = <0x14>;	/* again : 9 pF, sampling freq : 125 khz */
					sx9360_wifi,regproxctrl0phm = <0x21>;	/* gain: x4, rawfilt : 1-1/2 */
					sx9360_wifi,regproxctrl5 = <0x37>;		/* threshold: 288 */
					sx9360_wifi,regproxctrl4 = <0x15>;		/* hysteresis: small, closedeb: 2 samples, fardeb: 2 samples */
					sx9360_wifi,regproxctrl3 = <0x0D>;		/* AVGPOSFILT: 1/512, AVGNEGFILT: 1/2 */
					sx9360_wifi,regafeparam0phm = <0x0E>;	/* resolution: 512 */
				};
			};

		}; /* end of __overlay__ */
	}; /* end of fragment */
}; /* end of root */

&abox {
	status = "okay";
		pinctrl-0 = <&aud_codec_mclk &aud_codec_bus &aud_fm_bus &aud_spk_bus &aud_loopback_bus>;
		pinctrl-1 = <&aud_codec_mclk_idle &aud_codec_bus_idle &aud_fm_bus_idle &aud_spk_bus_idle &aud_loopback_bus_idle>;

};

&pinctrl_1 { //148F0000
	aud_fm_bus: aud-fm-bus {
		samsung,pins = "gpb1-1", "gpb1-2", "gpb1-3";
		samsung,pin-function = <0>;
		samsung,pin-pud = <1>;
	};

	aud_fm_bus_idle: aud-fm-bus-idle {
		samsung,pins = "gpb1-1", "gpb1-2", "gpb1-3";
		samsung,pin-function = <0>;
		samsung,pin-pud = <1>;
	};
};

&i2c_5 {
	status = "okay";
	#address-cells = <1>;
	#size-cells = <0>;
	pinctrl-names = "default";
	pinctrl-0 = <&i2c5_bus>;

	sx9360-i2c@28 {
		compatible = "sx9360";
		pinctrl-names = "default";
		pinctrl-0 = <&grip_int>;
		reg = <0x28>;
		interrupt-parent = <&gpa0>;
		interrupts = <6 0 0>;
		sx9360,nirq-gpio = <&gpa0 6 0>;

		sx9360,reggnrlctrl2 = <0x28>;		/* scanperiod: 81ms */
		sx9360,regafeparam1phm = <0x22>;	/* again : 9 pF, sampling freq : 166.67 khz */
		sx9360,regproxctrl0phm = <0x21>;	/* gain: x4, rawfilt : 1-1/2 */
		sx9360,regproxctrl5 = <0x37>;		/* threshold: 388 */
		sx9360,regproxctrl4 = <0x15>;		/* hysteresis: small, closedeb: 2 samples, fardeb: 2 samples */
		sx9360,regproxctrl3 = <0x0D>;		/* AVGPOSFILT: 1/512, AVGNEGFILT: 1/2 */
		sx9360,regafeparam0phm = <0x0E>;	/* resolution: 512 */
	};
};
